version: '3'
services:
  junit-daemon:
    build:
      context: .
      dockerfile: docker/java.docker
#    image: ${DOCKER_IMAGE_NAME}
    container_name: junit_daemon
    depends_on:
      - mq
    env_file:
      - docker-compose.env


  mq:
    build:
      context: .
      dockerfile: docker/rabbitmq.docker


  junit-workload-generator:
    build:
      context: .
      dockerfile: docker/python.docker
    container_name: junit_workload_generator
    depends_on:
      - mq
      - junit-daemon
    env_file:
      - docker-compose.env
